#!/usr/bin/env python3
"""
æ—¢å­˜ã®MGSè¨˜äº‹ã®ã‚¿ãƒ¡å£ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¿®æ­£ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
DMMè¨˜äº‹ã¨åŒã˜æ§‹æˆãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã«çµ±ä¸€
"""

import re
from pathlib import Path

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ
script_dir = Path(__file__).parent
project_root = script_dir.parent
content_dir = project_root / "content"

# ã‚¿ãƒ¡å£è¡¨ç¾ã®ç½®æ›ãƒ‘ã‚¿ãƒ¼ãƒ³
TONE_REPLACEMENTS = [
    # ã€Œã ã‚ã€â†’å‰Šé™¤ã¾ãŸã¯ã€Œã ã€ã€Œã§ã‚ã‚‹ã€
    (r"([ã€‚ã€])\s*ã ã‚", r"\1"),
    (r"ã ã‚\s*([ã€‚ã€])", r"\1"),
    (r"ã ã‚\s*$", ""),
    (r"ã ã‚\s+", ""),
    (r"ã ã‚", ""),
    
    # ã€Œãƒã‚¸ã§ã€â†’å‰Šé™¤ã¾ãŸã¯ã€Œæœ¬å½“ã«ã€ã€Œã¾ã•ã«ã€
    (r"ãƒã‚¸ã§\s*", ""),
    
    # ã€Œãƒ¤ãƒã„ã€â†’ã€Œå°è±¡çš„ã€ã€Œé­…åŠ›çš„ã€ã€Œç´ æ™´ã‚‰ã—ã„ã€
    (r"ãƒ¤ãƒã„", "å°è±¡çš„"),
    (r"ãƒ¤ãƒã‹ã£ãŸ", "å°è±¡çš„ã ã£ãŸ"),
    (r"ãƒ¤ãƒã™ãã‚‹", "å°è±¡çš„ã™ãã‚‹"),
    
    # ã€Œï½—ã€ã€Œwã€â†’å‰Šé™¤
    (r"ï½—+", ""),
    (r"w+", ""),
    
    # ã€ŒæŠœã‘ã‚‹ã€ã€Œæ˜‡å¤©ã€â†’ã€Œå¿ƒã‚’å¥ªã‚ã‚Œã‚‹ã€ã€Œæ„Ÿå‹•ã™ã‚‹ã€
    (r"æŠœã‘ã‚‹", "å¿ƒã‚’å¥ªã‚ã‚Œã‚‹"),
    (r"æŠœãã©ã“ã‚", "å°è±¡çš„ãªå ´é¢"),
    (r"æ˜‡å¤©", "æ„Ÿå‹•"),
    (r"æ˜‡å¤©ã—ãŸ", "æ„Ÿå‹•ã—ãŸ"),
    
    # ã€Œã‚¨ãƒ­ã‹ã£ãŸã€â†’ã€Œå°è±¡çš„ã ã£ãŸã€ã€Œé­…åŠ›çš„ã ã£ãŸã€
    (r"ã‚¨ãƒ­ã‹ã£ãŸ", "å°è±¡çš„ã ã£ãŸ"),
    (r"ã‚¨ãƒ­ãã¦", "é­…åŠ›çš„ã§"),
    (r"ã‚¨ãƒ­ã„", "é­…åŠ›çš„"),
    
    # ã€Œä¿ºã€ã€ŒãŠå‰ã€â†’ã€Œç§ã€ã€Œèª­è€…ã€
    (r"ä¿ºã®", "ç§ã®"),
    (r"ä¿ºã¯", "ç§ã¯"),
    (r"ä¿ºãŒ", "ç§ãŒ"),
    (r"ä¿ºã‚’", "ç§ã‚’"),
    (r"ä¿ºã«", "ç§ã«"),
    (r"ãŠå‰", "èª­è€…"),
    (r"ãŠå‰ã‚‰", "èª­è€…ã®çš†æ§˜"),
    
    # ã€Œã€œã™ãã‚‹ï½—ã€â†’ã€Œã€œã™ãã‚‹ã€
    (r"ã™ãã‚‹ï½—", "ã™ãã‚‹"),
    (r"ã™ãã‚‹w", "ã™ãã‚‹"),
    
    # ã€Œã€œã‚“ã ã‚ã€â†’ã€Œã€œã®ã ã€
    (r"ã‚“ã ã‚", "ã®ã "),
    (r"ã‚“ã ã‚\s*([ã€‚ã€])", r"ã®ã \1"),
    
    # ã€Œã€œã ã‚ã€â†’å‰Šé™¤
    (r"ã ã‚\s*([ã€‚ã€])", r"\1"),
    
    # ã€Œã€œã ã‚ã€â†’ã€Œã€œã ã€
    (r"ã ã‚\s*$", "ã "),
    
    # ã€Œã€œã ã‚ã€â†’ã€Œã€œã§ã‚ã‚‹ã€
    (r"ã ã‚\s+", "ã§ã‚ã‚‹ã€‚"),
    
    # ã€Œã€œã‚ã€â†’å‰Šé™¤ï¼ˆæ–‡æœ«ã®ã€Œã‚ã€ï¼‰
    (r"([ã€‚ã€])\s*ã‚\s*([ã€‚ã€])", r"\1\2"),
    (r"([ã€‚ã€])\s*ã‚\s*$", r"\1"),
    
    # ã€Œã€œã‚“ã€â†’ã€Œã€œã®ã ã€
    (r"([ã€‚ã€])\s*ã‚“\s*([ã€‚ã€])", r"\1ã®ã \2"),
    (r"([ã€‚ã€])\s*ã‚“\s*$", r"\1ã®ã "),
    
    # ã€Œã€œã­ã€â†’å‰Šé™¤ï¼ˆæ–‡æœ«ã®ã€Œã­ã€ï¼‰
    (r"([ã€‚ã€])\s*ã­\s*([ã€‚ã€])", r"\1\2"),
    (r"([ã€‚ã€])\s*ã­\s*$", r"\1"),
    
    # ã€Œã€œã‚ˆã€â†’å‰Šé™¤ï¼ˆæ–‡æœ«ã®ã€Œã‚ˆã€ï¼‰
    (r"([ã€‚ã€])\s*ã‚ˆ\s*([ã€‚ã€])", r"\1\2"),
    (r"([ã€‚ã€])\s*ã‚ˆ\s*$", r"\1"),
    
    # ã€Œã€œã‹ã‚‰ãªã€â†’ã€Œã€œã‹ã‚‰ã ã€
    (r"ã‹ã‚‰ãª\s*$", "ã‹ã‚‰ã "),
    
    # ã€Œã€œã ãã€â†’ã€Œã€œã ã€
    (r"ã ã\s*$", "ã "),
    
    # ã€Œã€œã ã‚ã€â†’ã€Œã€œã ã‚ã†ã€
    (r"ã ã‚\s*$", "ã ã‚ã†"),
    
    # ã€Œã€œã ã‚ï¼Ÿã€â†’ã€Œã€œã ã‚ã†ã‹ã€
    (r"ã ã‚\?+", "ã ã‚ã†ã‹"),
    
    # ã€Œã€œã˜ã‚ƒã‚“ã€â†’ã€Œã€œã§ã¯ãªã„ã‹ã€
    (r"ã˜ã‚ƒã‚“", "ã§ã¯ãªã„ã‹"),
    
    # ã€Œã€œã˜ã‚ƒãªã„ï¼Ÿã€â†’ã€Œã€œã§ã¯ãªã„ã ã‚ã†ã‹ã€
    (r"ã˜ã‚ƒãªã„\?+", "ã§ã¯ãªã„ã ã‚ã†ã‹"),
    
    # ã€Œã€œã—ã¦ã‚‹ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã€
    (r"ã—ã¦ã‚‹", "ã—ã¦ã„ã‚‹"),
    (r"ã—ã¦ã‚‹\s*([ã€‚ã€])", r"ã—ã¦ã„ã‚‹\1"),
    
    # ã€Œã€œã—ã¦ãŸã€â†’ã€Œã€œã—ã¦ã„ãŸã€
    (r"ã—ã¦ãŸ", "ã—ã¦ã„ãŸ"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ã€
    (r"ã—ã¦ã‚‹ã‚“", "ã—ã¦ã„ã‚‹ã®ã "),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ã€
    (r"ã—ã¦ãŸã‚“", "ã—ã¦ã„ãŸã®ã "),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã€
    (r"ã—ã¦ã‚‹ã‚", "ã—ã¦ã„ã‚‹"),
    
    # ã€Œã€œã—ã¦ãŸã‚ã€â†’ã€Œã€œã—ã¦ã„ãŸã€
    (r"ã—ã¦ãŸã‚", "ã—ã¦ã„ãŸ"),
    
    # ã€Œã€œã—ã¦ã‚‹ã®ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ã€
    (r"ã—ã¦ã‚‹ã®", "ã—ã¦ã„ã‚‹ã®ã "),
    
    # ã€Œã€œã—ã¦ãŸã®ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ã€
    (r"ã—ã¦ãŸã®", "ã—ã¦ã„ãŸã®ã "),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ã€
    (r"ã—ã¦ã‚‹ã‚“ã ", "ã—ã¦ã„ã‚‹ã®ã "),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ã€
    (r"ã—ã¦ãŸã‚“ã ", "ã—ã¦ã„ãŸã®ã "),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‚ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‚", "ã—ã¦ã„ã‚‹ã®ã "),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‚ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ã€
    (r"ã—ã¦ãŸã‚“ã ã‚", "ã—ã¦ã„ãŸã®ã "),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©", "ã—ã¦ã„ã‚‹ã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©", "ã—ã¦ã„ãŸã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ã€ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€ã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©ã€", "ã—ã¦ã„ã‚‹ã®ã ãŒã€"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ã€ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€ã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©ã€", "ã—ã¦ã„ãŸã®ã ãŒã€"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ã­ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©ã­", "ã—ã¦ã„ã‚‹ã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ã­ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©ã­", "ã—ã¦ã„ãŸã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ã•ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©ã•", "ã—ã¦ã„ã‚‹ã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ã•ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©ã•", "ã—ã¦ã„ãŸã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ãªã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©ãª", "ã—ã¦ã„ã‚‹ã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ãªã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©ãª", "ã—ã¦ã„ãŸã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ã€ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€ã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©ã€", "ã—ã¦ã„ã‚‹ã®ã ãŒã€"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ã€ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€ã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©ã€", "ã—ã¦ã„ãŸã®ã ãŒã€"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ã­ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©ã­", "ã—ã¦ã„ã‚‹ã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ã­ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©ã­", "ã—ã¦ã„ãŸã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ã•ã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©ã•", "ã—ã¦ã„ã‚‹ã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ã•ã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©ã•", "ã—ã¦ã„ãŸã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ã‚‹ã‚“ã ã‘ã©ãªã€â†’ã€Œã€œã—ã¦ã„ã‚‹ã®ã ãŒã€
    (r"ã—ã¦ã‚‹ã‚“ã ã‘ã©ãª", "ã—ã¦ã„ã‚‹ã®ã ãŒ"),
    
    # ã€Œã€œã—ã¦ãŸã‚“ã ã‘ã©ãªã€â†’ã€Œã€œã—ã¦ã„ãŸã®ã ãŒã€
    (r"ã—ã¦ãŸã‚“ã ã‘ã©ãª", "ã—ã¦ã„ãŸã®ã ãŒ"),
]

# è¦‹å‡ºã—ã®ç½®æ›
HEADING_REPLACEMENTS = {
    r"###?\s*ã‚¿ã‚¤ãƒˆãƒ«è¦‹ãŸç¬é–“ã€ã“ã‚Œãƒ¤ãƒã„ã£ã¦ç¢ºä¿¡ã—ãŸã‚ï½—": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*è¦‹å§‹ã‚ãŸç¬é–“ã«å®Œå…¨ã«ã‚„ã‚‰ã‚ŒãŸã‚ï½—": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*å†’é ­ã‹ã‚‰ãƒã‚¸ã§æœŸå¾…å€¤ãƒ–ãƒä¸Šã’ã ã£ãŸã‚ï½—": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*æœ€åˆã®æ•°ç§’ã§å®Œå…¨ã«ãƒãƒã£ãŸã‚ï½—": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*ç”»é¢ã«æ˜ ã£ãŸç¬é–“ã€ã‚‚ã†å®Œå…¨ã«ã‚„ã‚‰ã‚ŒãŸã‚ï½—": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*è¦‹å§‹ã‚ãŸç¬é–“ã«ã€Œã‚ã‚ã€ã“ã‚Œã¯ä¼èª¬ã ã‚ã€ã£ã¦ç¢ºä¿¡ã—ãŸã‚ï½—": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*å†’é ­ã‹ã‚‰ãƒã‚¸ã§èˆˆå¥®ãŒæ­¢ã¾ã‚‰ãªã‹ã£ãŸã‚ï½—": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*æœ€åˆã®ã‚·ãƒ¼ãƒ³ã§å®Œå…¨ã«å¼•ãè¾¼ã¾ã‚ŒãŸã‚ï½—": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*å§‹ã¾ã£ãŸç¬é–“ã®ã€Œã‚­ã‚¿ã‚³ãƒ¬ï½—ã€æ„Ÿ": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*ä½œå“ã¨ã®å‡ºä¼šã„.*ã ã‚": "## å¿ƒã‚’æºã•ã¶ã‚‹ã€ç¦æ–­ã®ç‰©èª",
    r"###?\s*ã“ã“ãŒã‚¨ãƒ­ã‹ã£ãŸï½—.*": "## å¿ƒã«æ®‹ã‚‹ã‚·ãƒ¼ãƒ³",
    r"###?\s*ä»Šã™ãè¦‹ã¦ã“ã„ï½—.*": "## èª­è€…ã¸ã®èªã‚Šã‹ã‘",
}

def fix_article_tone(content: str) -> str:
    """è¨˜äº‹ã®ã‚¿ãƒ¡å£ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¿®æ­£"""
    # URLã‚’ä¿®æ­£
    content = re.sub(r"https://\.mgstage\.com", "https://www.mgstage.com", content)
    
    lines = content.split('\n')
    fixed_lines = []
    
    for line in lines:
        # è¦‹å‡ºã—ã‚’ä¿®æ­£
        fixed_line = line
        for pattern, replacement in HEADING_REPLACEMENTS.items():
            fixed_line = re.sub(pattern, replacement, fixed_line, flags=re.IGNORECASE)
        
        # ã‚¿ãƒ¡å£è¡¨ç¾ã‚’ä¿®æ­£ï¼ˆè¤‡æ•°å›é©ç”¨ï¼‰
        for _ in range(3):  # 3å›ç¹°ã‚Šè¿”ã—ã¦ç¢ºå®Ÿã«ä¿®æ­£
            for pattern, replacement in TONE_REPLACEMENTS:
                try:
                    fixed_line = re.sub(pattern, replacement, fixed_line)
                except:
                    pass  # ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
        
        fixed_lines.append(fixed_line)
    
    content = '\n'.join(fixed_lines)
    
    # ä½™åˆ†ãªç©ºç™½è¡Œã‚’æ•´ç†
    content = re.sub(r"\n\s*\n\s*\n+", "\n\n", content)
    
    return content

def main():
    """ãƒ¡ã‚¤ãƒ³å‡¦ç†"""
    print("=" * 80)
    print("  æ—¢å­˜MGSè¨˜äº‹ã®ã‚¿ãƒ¡å£ã‚¹ã‚¿ã‚¤ãƒ«ä¿®æ­£")
    print("=" * 80 + "\n")
    
    # 2026-01-02ã®è¨˜äº‹ã‚’å–å¾—
    mgs_articles = list(content_dir.glob("2026-01-02-*.md"))
    
    if not mgs_articles:
        print("âŒ ä¿®æ­£å¯¾è±¡ã®è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        return
    
    print(f"ğŸ“‹ {len(mgs_articles)}ä»¶ã®è¨˜äº‹ã‚’ç¢ºèªã—ã¾ã™\n")
    
    fixed_count = 0
    skipped_count = 0
    
    for article_file in mgs_articles:
        try:
            with open(article_file, "r", encoding="utf-8") as f:
                original_content = f.read()
            
            # ã‚¿ãƒ¡å£ã‚¹ã‚¿ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            has_tameguchi = any([
                "ã ã‚" in original_content,
                "ãƒã‚¸ã§" in original_content,
                "ãƒ¤ãƒã„" in original_content,
                "ï½—" in original_content,
                "w" in original_content and "www" in original_content.lower(),
                "æŠœã‘ã‚‹" in original_content,
                "æ˜‡å¤©" in original_content,
                "ã‚¨ãƒ­ã‹ã£ãŸ" in original_content,
                "ä¿º" in original_content,
                "ãŠå‰" in original_content,
            ])
            
            if not has_tameguchi:
                print(f"â­ï¸  {article_file.name} - ä¿®æ­£ä¸è¦")
                skipped_count += 1
                continue
            
            # å£èª¿ã‚’ä¿®æ­£
            fixed_content = fix_article_tone(original_content)
            
            # å¤‰æ›´ãŒã‚ã£ãŸå ´åˆã®ã¿ä¿å­˜
            if fixed_content != original_content:
                with open(article_file, "w", encoding="utf-8") as f:
                    f.write(fixed_content)
                print(f"âœ… {article_file.name} - ä¿®æ­£å®Œäº†")
                fixed_count += 1
            else:
                print(f"â­ï¸  {article_file.name} - å¤‰æ›´ãªã—")
                skipped_count += 1
                
        except Exception as e:
            print(f"âŒ {article_file.name} - ã‚¨ãƒ©ãƒ¼: {e}")
            import traceback
            traceback.print_exc()
    
    print("\n" + "=" * 80)
    print(f"ğŸ‰ ä¿®æ­£å®Œäº†ï¼")
    print(f"   ä¿®æ­£: {fixed_count}ä»¶")
    print(f"   ã‚¹ã‚­ãƒƒãƒ—: {skipped_count}ä»¶")
    print("=" * 80)

if __name__ == "__main__":
    main()

